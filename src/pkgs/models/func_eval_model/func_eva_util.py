import yaml, os
from collections import OrderedDict
from scipy.signal import find_peaks
from src.pkgs.models.func_eval_model.daily_image_analysis import get_meal_increase_glucose_periods

def get_func_eval_prompt(name):
    file_path = 'data/prompt_data/func_eval_prompt.yaml'
    dic = yaml.load(open(file_path, encoding="utf-8"), Loader=yaml.FullLoader)
    return dic.get(name, '')

def get_history_info(history):
    his_str = ''
    for i in history:
        his_str += f"{i['send_time']}: {i['role']}: {i['content']}\n"
    return his_str

def get_sch_str(schedule):
    sch_str = ''
    for s in schedule:
        sch_str += f"{s.get('time', '')} {s.get('name', '')}\n"
    return sch_str

def get_daily_blood_glucose_str(daily_blood_glucose):
    bg_str = ''
    for i in daily_blood_glucose:
        bg_str += f"æµ‹é‡æ—¶é—´ï¼š{i.get('time', '')}  æµ‹é‡å€¼ï¼š{i.get('value', '')}\n"
    return bg_str

def get_daily_diet_str(daily_diet_info, daily_blood_glucose):
    daily_diet_str = ''
    periods_str = get_meal_increase_glucose_periods(daily_diet_info, daily_blood_glucose)
    for idx, i in enumerate(daily_diet_info):
        diet_info = ''
        for info in i.get('diet_info', []):
            if info:
                diet_info += f"{info.get('count', '')}{info.get('unit', '')}{info.get('foodname', '')}ï¼Œ"
        if len(periods_str) == len(daily_diet_info):
            daily_diet_str += f"å°±é¤æ—¶é—´ï¼š{i.get('diet_time', '')} å°±é¤é£Ÿç‰©ï¼š{diet_info}ã€‚åŒ»ç”Ÿå½“é¤è¯„ä»·ï¼š{i.get('diet_eval', 'æ— ')}ã€‚ {periods_str[idx]}\n"
        else:
            daily_diet_str += f"å°±é¤æ—¶é—´ï¼š{i.get('diet_time', '')} å°±é¤é£Ÿç‰©ï¼š{diet_info}ã€‚åŒ»ç”Ÿå½“é¤è¯„ä»·ï¼š{i.get('diet_eval', 'æ— ')}\n"

    return daily_diet_str if daily_diet_str else 'æ— '

def get_daily_key_bg(bg_info, diet_info):
    res = []
    buckets = OrderedDict()
    for info in bg_info:
        time = info.get('time', '').split(' ')[-1]
        key = buckets.get(time.split(':')[0], '')
        if not key:
            buckets[time.split(':')[0]] = [info]
        else:
            buckets[time.split(':')[0]].append(info)
    img_time = []
    for info in diet_info:
        time_key = info.get('diet_time', '').split(' ')[-1].split(':')[0]
        if time_key:
            img_time.append(info.get('diet_time', '').split(' ')[-1])
    night_low = {}
    day_high = {}
    peaks = []
    for key in buckets.keys():
        for i in img_time:
            if (int(key) == int(i.split(':')[0]) + 1) or (int(key) == int(i.split(':')[0]) + 2):
                # if (int(key) in [int(i.split(':')[0]) + 1 for i in img_time]) or (int(key) in [int(i.split(':')[0]) + 2 for i in img_time]):
                for j in buckets[key]:
                    if i.split(':')[1] == j['time'].split(' ')[-1].split(':')[1]:
                        res.append(j)
                        break
                    elif i.split(':')[1] < j['time'].split(' ')[-1].split(':')[1]:
                        res.append(j)
                        break
        if int(key) < 6 or int(key) > 21:  # å¤œé—´æ—¶æ®µ
            for i in buckets[key]:
                if not night_low:
                    night_low = i
                elif night_low['value'] > i['value']:
                    night_low = i
            if int(key) % 2 == 0:
                res.append(buckets[key][0])
        elif 5 < int(key) < 22:      # ç™½å¤©æ—¶æ®µ
            peak_idxes, _ = find_peaks([i['value'] for i in buckets[key]], height=0)
            peaks.extend([x for i, x in enumerate(buckets[key]) if i in peak_idxes])
            res.append(buckets[key][0])
            for i,x in enumerate(buckets[key]):
                if not day_high:
                    day_high = x
                elif day_high['value'] < x['value']:
                    day_high = x
    res.extend(sorted(peaks, key=lambda i: i['value'], reverse=True)[:3])
    res.append(night_low)
    # res.append(day_high)
    unique_tuples = set(tuple(sorted(d.items())) for d in res)
    res = [dict(t) for t in unique_tuples]
    res = sorted(res, key=lambda item: item.get('time', ''))
    return res


daily_diet_eval_prompt = """# å·²çŸ¥ä¿¡æ¯
## ä¸ªäººä¿¡æ¯ï¼š
{0}

## å½“å¤©é¥®é£ŸåŠæ¯é¤è¯„ä»·ä¿¡æ¯ï¼š
{1}

## ä¸€æ—¥è¡€ç³–ä¿¡æ¯ï¼š
{2}

## ç®¡ç†åœºæ™¯ï¼š
{3}

# ä»»åŠ¡æè¿°
è¯·ä½ æ‰®æ¼”ä¸€ä½ç»éªŒä¸°å¯Œçš„è¥å…»å¸ˆï¼Œè¯·ä½ å¯¹æˆ‘æäº¤çš„ä¸€æ—¥é¥®é£Ÿä¿¡æ¯åšå‡ºåˆç†è¯„ä»·å’Œç§‘å­¦å»ºè®®ã€‚

# è¾“å‡ºè¦æ±‚
 - ä½ éœ€è¦æ ¹æ®æˆ‘çš„è¡€ç³–æ•°æ®ã€æäº¤çš„é¥®é£Ÿä¿¡æ¯ä»¥åŠæˆ‘çš„å·²çŸ¥ä¿¡æ¯å¦‚ç–¾ç—…ç­‰å› ç´ ç»¼åˆåˆ†æï¼Œæ¥è¾“å‡ºé¥®é£Ÿè¯„ä»·å’Œå»ºè®®ã€‚
 - è¾“å‡ºå¯èƒ½åŒ…å«çš„ç»´åº¦æœ‰ï¼š1.è¡€ç³–ç¨³å®šæ€§è¯„ä¼°ã€2.é¥®é£Ÿå¾…æ”¹å–„å»ºè®®2ä¸ªç»´åº¦ã€‚
 - æ•´ä½“å­—æ•°æ§åˆ¶åœ¨250å­—ä»¥å†…ã€‚
 - è¾“å‡ºçš„å†…å®¹è¦é€šä¿—æ˜“æ‡‚ï¼Œç®€å•æ˜äº†ï¼Œç¬¦åˆè¥å…»å­¦è§‚ç‚¹ã€‚
 - æ¯ä¸ªç»´åº¦çš„è¯„ä»·å¯ä»¥æ¢è¡Œæ˜¾ç¤ºï¼Œä¸¥æ ¼å‚è€ƒè¾“å‡ºç¤ºä¾‹ä¸­çš„å†…å®¹å’Œæ ¼å¼ã€‚
## è¡€ç³–ç¨³å®šæ€§è¯„ä¼°è¾“å‡ºè¦æ±‚
 - è¡€ç³–ç¨³å®šæ€§è¯·å‚è€ƒé¤å‰é¤åè¡€ç³–å€¼æ³¢åŠ¨ã€æœ€ä½å€¼æœ€é«˜å€¼ã€æœ€å¤§è¡€ç³–æ³¢åŠ¨çš„ç»´åº¦æ¥è¯„ä¼°ï¼Œè¯´æ˜å…·ä½“çš„æ³¢åŠ¨æƒ…å†µï¼Œè¦å®¢è§‚ç¬¦åˆäº‹å®ã€‚
 - å¯ä»¥æŒ‡å‡ºé¤åè¡€ç³–æ³¢åŠ¨å¯èƒ½ä¸é€‰æ‹©çš„é£Ÿç‰©çš„å…³ç³»ï¼Œè¯„ä»·é£Ÿç‰©é€‰æ‹©æ˜¯å¦åˆç†ã€‚
 - è¯†åˆ«å¼‚å¸¸è¡€ç³–ä¿¡æ¯ï¼Œå¹¶ç»™äºˆæé†’ï¼Œæ¯”å¦‚å¯¹ä½è¡€ç³–æƒ…å†µåº”ç»™å‡ºå»ºè®®ã€‚
 - å¦‚æœæ²¡æœ‰è¡€ç³–æ•°æ®ï¼Œè¯¥è¯„ä»·ç»´åº¦å¯å¿½ç•¥ã€‚
## é¥®é£Ÿå¾…æ”¹å–„å»ºè®®
 - é¥®é£Ÿå¾…æ”¹å–„å»ºè®®ä¸»è¦é’ˆå¯¹å¯ä»¥ä¼˜åŒ–çš„é—®é¢˜ç‚¹ç€é‡æŒ‡å¯¼ï¼Œä¾‹å¦‚ä»ç”¨é¤æ—¶é—´ã€ç”¨é¤è§„å¾‹æ€§ã€é£Ÿç‰©æ­é…ç­‰ç»´åº¦è¾“å‡ºæ”¹å–„å»ºè®®ã€‚
 - è‹¥ä¸€æ—¥æŸé¤æ¬¡çš„é¥®é£Ÿä¿¡æ¯æœ‰ç¼ºå¤±ï¼Œå¯ä»¥ç»™äºˆæé†’è§„å¾‹ç”¨é¤çš„é‡è¦æ€§ã€‚
 - é¿å…è¾“å‡º123åˆ—è¡¨ã€‚
  
# è¾“å‡ºç¤ºä¾‹
ã€è¡€ç³–åˆ†æã€‘
çœ‹äº†ä½ çš„è¡€ç³–è®°å½•ï¼Œåˆé¥­åè¡€ç³–å‡å¾—æœ‰ç‚¹é«˜å‘¢ï¼Œåˆ°14äº†ã€‚è™½ç„¶åæ¥æ˜¯é™ä¸‹æ¥äº†ï¼Œä¸è¿‡è¿˜æ˜¯æ¯”è¾ƒé«˜ã€‚
ä½ è¿™ä¸€å¤©è¡€ç³–èµ·ä¼æŒºå¤§çš„ï¼Œä»æ—©ä¸Šçš„12åˆ°ç¡å‰çš„4ï¼Œå·®äº†8å¤šï¼Œå¾—æ³¨æ„ä¸€ä¸‹ï¼Œå°¤å…¶è¦å½“å¿ƒæ™šä¸Šä¼šä¸ä¼šä½è¡€ç³–ã€‚
æˆ‘çœ‹ä½ åˆé¥­åƒçº¢è–¯å•¦ï¼Ÿçº¢è–¯å‡ç³–æ¯”è¾ƒå¿«ï¼Œå†é…ä¸Šå’¸èœï¼Œè¿™ä¸ªæ­é…ä¸å¤ªåˆé€‚ã€‚æ™šé¥­è™½ç„¶åƒçš„æ¸…æ·¡ï¼Œä¸»è¦æ˜¯è”¬èœï¼Œè¡€ç³–æ˜¯å¹³ç¨³ï¼Œä½†å°±æ˜¯è¥å…»ä¸å¤ªå¤Ÿï¼Œå®¹æ˜“å¯¼è‡´è¡€ç³–é™å¾—å¤ªä½ã€‚
ã€é¥®é£Ÿå»ºè®®ã€‘
åˆé¥­ğŸšçš„è¯ï¼Œå»ºè®®ä½ æ¢æˆå…¨éº¦é¢åŒ…æˆ–è€…ç‡•éº¦ï¼Œå†å¤šåƒç‚¹ç»¿å¶èœã€‚è‡³äºæ™šé¥­ğŸŸï¼Œå¾—åŠ ç‚¹è‚‰æˆ–è±†è…è¡¥å……è›‹ç™½è´¨ï¼Œä¸»é£Ÿä¹Ÿä¸èƒ½çœï¼Œæ¥ç‚¹ç³™ç±³é¥­æˆ–å…¨éº¦é¢åŒ…ã€‚è¿™æ ·è¥å…»æ›´å‡è¡¡ï¼Œè¡€ç³–ä¹Ÿä¸ä¼šå¿½é«˜å¿½ä½çš„ã€‚
è®°ä½ğŸŒŸï¼šæ¯é¡¿é¥­éƒ½è¦é€‚é‡ï¼Œåˆ«åƒå¤ªå¤šï¼Œè¿™æ ·è¡€ç³–å¥½æ§åˆ¶ã€‚

Begins!"""

daily_diet_eval_prompt_2 = """# å·²çŸ¥ä¿¡æ¯
## ä¸ªäººä¿¡æ¯ï¼š
{0}

## å½“å¤©é¥®é£ŸåŠæ¯é¤è¯„ä»·ä¿¡æ¯ï¼š
{1}

## å½“å¤©1æ—¥åŠ¨æ€è¡€ç³–åˆ†ææŠ¥å‘Šï¼š
{2}

## ç®¡ç†åœºæ™¯ï¼š
{3}

# ä»»åŠ¡æè¿°
è¯·ä½ æ‰®æ¼”ä¸€ä½ç»éªŒä¸°å¯Œçš„è¥å…»å¸ˆï¼Œè¯·ä½ å¯¹æˆ‘æäº¤çš„ä¸€æ—¥é¥®é£Ÿä¿¡æ¯åšå‡ºåˆç†è¯„ä»·å’Œç§‘å­¦å»ºè®®ã€‚

# è¾“å‡ºè¦æ±‚
 - ä½ éœ€è¦æ ¹æ®æˆ‘çš„è¡€ç³–æ•°æ®ã€æäº¤çš„é¥®é£Ÿä¿¡æ¯ä»¥åŠæˆ‘çš„å·²çŸ¥ä¿¡æ¯å¦‚ç–¾ç—…ç­‰å› ç´ ç»¼åˆåˆ†æï¼Œæ¥è¾“å‡ºé¥®é£Ÿè¯„ä»·å’Œå»ºè®®ã€‚
 - è¾“å‡ºå¯èƒ½åŒ…å«çš„ç»´åº¦æœ‰ï¼š1.è¡€ç³–ç¨³å®šæ€§è¯„ä¼°ã€2.é¥®é£Ÿå¾…æ”¹å–„å»ºè®®2ä¸ªç»´åº¦ã€‚
 - æ•´ä½“å­—æ•°æ§åˆ¶åœ¨250å­—ä»¥å†…ã€‚
 - è¾“å‡ºçš„å†…å®¹è¦é€šä¿—æ˜“æ‡‚ï¼Œç®€å•æ˜äº†ï¼Œç¬¦åˆè¥å…»å­¦è§‚ç‚¹ã€‚
 - æ¯ä¸ªç»´åº¦çš„è¯„ä»·å¯ä»¥æ¢è¡Œæ˜¾ç¤ºï¼Œä¸¥æ ¼å‚è€ƒè¾“å‡ºç¤ºä¾‹ä¸­çš„å†…å®¹å’Œæ ¼å¼ã€‚
## è¡€ç³–ç¨³å®šæ€§è¯„ä¼°è¾“å‡ºè¦æ±‚
 - è¡€ç³–ç¨³å®šæ€§è¯·å‚è€ƒé¤å‰é¤åè¡€ç³–å€¼æ³¢åŠ¨ã€æœ€ä½å€¼æœ€é«˜å€¼ã€æœ€å¤§è¡€ç³–æ³¢åŠ¨çš„ç»´åº¦æ¥è¯„ä¼°ï¼Œè¯´æ˜å…·ä½“çš„æ³¢åŠ¨æƒ…å†µï¼Œè¦å®¢è§‚ç¬¦åˆäº‹å®ã€‚
 - å¯ä»¥æŒ‡å‡ºé¤åè¡€ç³–æ³¢åŠ¨å¯èƒ½ä¸é€‰æ‹©çš„é£Ÿç‰©çš„å…³ç³»ï¼Œè¯„ä»·é£Ÿç‰©é€‰æ‹©æ˜¯å¦åˆç†ã€‚
 - è¯†åˆ«å¼‚å¸¸è¡€ç³–ä¿¡æ¯ï¼Œå¹¶ç»™äºˆæé†’ï¼Œæ¯”å¦‚å¯¹ä½è¡€ç³–æƒ…å†µåº”ç»™å‡ºå»ºè®®ã€‚
 - å¦‚æœæ²¡æœ‰è¡€ç³–æ•°æ®ï¼Œè¯¥è¯„ä»·ç»´åº¦å¯å¿½ç•¥ã€‚
## é¥®é£Ÿå¾…æ”¹å–„å»ºè®®
 - é¥®é£Ÿå¾…æ”¹å–„å»ºè®®ä¸»è¦é’ˆå¯¹å¯ä»¥ä¼˜åŒ–çš„é—®é¢˜ç‚¹ç€é‡æŒ‡å¯¼ï¼Œä¾‹å¦‚ä»ç”¨é¤æ—¶é—´ã€ç”¨é¤è§„å¾‹æ€§ã€é£Ÿç‰©æ­é…ç­‰ç»´åº¦è¾“å‡ºæ”¹å–„å»ºè®®ã€‚
 - è‹¥ä¸€æ—¥æŸé¤æ¬¡çš„é¥®é£Ÿä¿¡æ¯æœ‰ç¼ºå¤±ï¼Œå¯ä»¥ç»™äºˆæé†’è§„å¾‹ç”¨é¤çš„é‡è¦æ€§ã€‚
 - é¿å…è¾“å‡º123åˆ—è¡¨ã€‚

# è¾“å‡ºç¤ºä¾‹
ã€è¡€ç³–åˆ†æã€‘
çœ‹äº†ä½ çš„è¡€ç³–è®°å½•ï¼Œåˆé¥­åè¡€ç³–å‡å¾—æœ‰ç‚¹é«˜å‘¢ï¼Œåˆ°14äº†ã€‚è™½ç„¶åæ¥æ˜¯é™ä¸‹æ¥äº†ï¼Œä¸è¿‡è¿˜æ˜¯æ¯”è¾ƒé«˜ã€‚
ä½ è¿™ä¸€å¤©è¡€ç³–èµ·ä¼æŒºå¤§çš„ï¼Œä»æ—©ä¸Šçš„12åˆ°ç¡å‰çš„4ï¼Œå·®äº†8å¤šï¼Œå¾—æ³¨æ„ä¸€ä¸‹ï¼Œå°¤å…¶è¦å½“å¿ƒæ™šä¸Šä¼šä¸ä¼šä½è¡€ç³–ã€‚
æˆ‘çœ‹ä½ åˆé¥­åƒçº¢è–¯å•¦ï¼Ÿçº¢è–¯å‡ç³–æ¯”è¾ƒå¿«ï¼Œå†é…ä¸Šå’¸èœï¼Œè¿™ä¸ªæ­é…ä¸å¤ªåˆé€‚ã€‚æ™šé¥­è™½ç„¶åƒçš„æ¸…æ·¡ï¼Œä¸»è¦æ˜¯è”¬èœï¼Œè¡€ç³–æ˜¯å¹³ç¨³ï¼Œä½†å°±æ˜¯è¥å…»ä¸å¤ªå¤Ÿï¼Œå®¹æ˜“å¯¼è‡´è¡€ç³–é™å¾—å¤ªä½ã€‚
ã€é¥®é£Ÿå»ºè®®ã€‘
åˆé¥­ğŸšçš„è¯ï¼Œå»ºè®®ä½ æ¢æˆå…¨éº¦é¢åŒ…æˆ–è€…ç‡•éº¦ï¼Œå†å¤šåƒç‚¹ç»¿å¶èœã€‚è‡³äºæ™šé¥­ğŸŸï¼Œå¾—åŠ ç‚¹è‚‰æˆ–è±†è…è¡¥å……è›‹ç™½è´¨ï¼Œä¸»é£Ÿä¹Ÿä¸èƒ½çœï¼Œæ¥ç‚¹ç³™ç±³é¥­æˆ–å…¨éº¦é¢åŒ…ã€‚è¿™æ ·è¥å…»æ›´å‡è¡¡ï¼Œè¡€ç³–ä¹Ÿä¸ä¼šå¿½é«˜å¿½ä½çš„ã€‚
è®°ä½ğŸŒŸï¼šæ¯é¡¿é¥­éƒ½è¦é€‚é‡ï¼Œåˆ«åƒå¤ªå¤šï¼Œè¿™æ ·è¡€ç³–å¥½æ§åˆ¶ã€‚

Begins!"""

daily_diet_eval_prompt_3 = """# å·²çŸ¥ä¿¡æ¯
## ä¸ªäººä¿¡æ¯ï¼š
{0}

## å½“å¤©é¥®é£ŸåŠæ¯é¤è¯„ä»·ä¿¡æ¯ï¼š
{1}

## å½“å‰1æ—¥å…³é”®è¡€ç³–å€¼ï¼š
{2}

## å½“å¤©1æ—¥åŠ¨æ€è¡€ç³–åˆ†ææŠ¥å‘Šï¼š
{3}

## ç®¡ç†åœºæ™¯ï¼š
{4}

# ä»»åŠ¡æè¿°
è¯·ä½ æ‰®æ¼”ä¸€ä½ç»éªŒä¸°å¯Œçš„è¥å…»å¸ˆï¼Œè¯·ä½ å¯¹æˆ‘æäº¤çš„ä¸€æ—¥é¥®é£Ÿä¿¡æ¯åšå‡ºåˆç†è¯„ä»·å’Œç§‘å­¦å»ºè®®ã€‚

# è¾“å‡ºè¦æ±‚
 - ä½ éœ€è¦æ ¹æ®æˆ‘çš„è¡€ç³–æ•°æ®ã€æäº¤çš„é¥®é£Ÿä¿¡æ¯ä»¥åŠæˆ‘çš„å·²çŸ¥ä¿¡æ¯å¦‚ç–¾ç—…ç­‰å› ç´ ç»¼åˆåˆ†æï¼Œæ¥è¾“å‡ºé¥®é£Ÿè¯„ä»·å’Œå»ºè®®ã€‚
 - è¾“å‡ºå¯èƒ½åŒ…å«çš„ç»´åº¦æœ‰ï¼š1.è¡€ç³–ç¨³å®šæ€§è¯„ä¼°ã€2.é¥®é£Ÿå¾…æ”¹å–„å»ºè®®2ä¸ªç»´åº¦ã€‚
 - æ•´ä½“å­—æ•°æ§åˆ¶åœ¨250å­—ä»¥å†…ã€‚
 - è¾“å‡ºçš„å†…å®¹è¦é€šä¿—æ˜“æ‡‚ï¼Œç®€å•æ˜äº†ï¼Œç¬¦åˆè¥å…»å­¦è§‚ç‚¹ã€‚
 - æ¯ä¸ªç»´åº¦çš„è¯„ä»·å¯ä»¥æ¢è¡Œæ˜¾ç¤ºï¼Œä¸¥æ ¼å‚è€ƒè¾“å‡ºç¤ºä¾‹ä¸­çš„å†…å®¹å’Œæ ¼å¼ã€‚
## è¡€ç³–ç¨³å®šæ€§è¯„ä¼°è¾“å‡ºè¦æ±‚
 - è¡€ç³–ç¨³å®šæ€§è¯·å‚è€ƒé¤å‰é¤åè¡€ç³–å€¼æ³¢åŠ¨ã€æœ€ä½å€¼æœ€é«˜å€¼ã€æœ€å¤§è¡€ç³–æ³¢åŠ¨çš„ç»´åº¦æ¥è¯„ä¼°ï¼Œè¯´æ˜å…·ä½“çš„æ³¢åŠ¨æƒ…å†µï¼Œè¦å®¢è§‚ç¬¦åˆäº‹å®ã€‚
 - å¯ä»¥æŒ‡å‡ºé¤åè¡€ç³–æ³¢åŠ¨å¯èƒ½ä¸é€‰æ‹©çš„é£Ÿç‰©çš„å…³ç³»ï¼Œè¯„ä»·é£Ÿç‰©é€‰æ‹©æ˜¯å¦åˆç†ã€‚
 - è¯†åˆ«å¼‚å¸¸è¡€ç³–ä¿¡æ¯ï¼Œå¹¶ç»™äºˆæé†’ï¼Œæ¯”å¦‚å¯¹ä½è¡€ç³–æƒ…å†µåº”ç»™å‡ºå»ºè®®ã€‚
 - å¦‚æœæ²¡æœ‰è¡€ç³–æ•°æ®ï¼Œè¯¥è¯„ä»·ç»´åº¦å¯å¿½ç•¥ã€‚
## é¥®é£Ÿå¾…æ”¹å–„å»ºè®®
 - é¥®é£Ÿå¾…æ”¹å–„å»ºè®®ä¸»è¦é’ˆå¯¹å¯ä»¥ä¼˜åŒ–çš„é—®é¢˜ç‚¹ç€é‡æŒ‡å¯¼ï¼Œä¾‹å¦‚ä»ç”¨é¤æ—¶é—´ã€ç”¨é¤è§„å¾‹æ€§ã€é£Ÿç‰©æ­é…ç­‰ç»´åº¦è¾“å‡ºæ”¹å–„å»ºè®®ã€‚
 - è‹¥ä¸€æ—¥æŸé¤æ¬¡çš„é¥®é£Ÿä¿¡æ¯æœ‰ç¼ºå¤±ï¼Œå¯ä»¥ç»™äºˆæé†’è§„å¾‹ç”¨é¤çš„é‡è¦æ€§ã€‚
 - é¿å…è¾“å‡º123åˆ—è¡¨ã€‚

# è¾“å‡ºç¤ºä¾‹
ã€è¡€ç³–åˆ†æã€‘
çœ‹äº†ä½ çš„è¡€ç³–è®°å½•ï¼Œåˆé¥­åè¡€ç³–å‡å¾—æœ‰ç‚¹é«˜å‘¢ï¼Œåˆ°14äº†ã€‚è™½ç„¶åæ¥æ˜¯é™ä¸‹æ¥äº†ï¼Œä¸è¿‡è¿˜æ˜¯æ¯”è¾ƒé«˜ã€‚
ä½ è¿™ä¸€å¤©è¡€ç³–èµ·ä¼æŒºå¤§çš„ï¼Œä»æ—©ä¸Šçš„12åˆ°ç¡å‰çš„4ï¼Œå·®äº†8å¤šï¼Œå¾—æ³¨æ„ä¸€ä¸‹ï¼Œå°¤å…¶è¦å½“å¿ƒæ™šä¸Šä¼šä¸ä¼šä½è¡€ç³–ã€‚
æˆ‘çœ‹ä½ åˆé¥­åƒçº¢è–¯å•¦ï¼Ÿçº¢è–¯å‡ç³–æ¯”è¾ƒå¿«ï¼Œå†é…ä¸Šå’¸èœï¼Œè¿™ä¸ªæ­é…ä¸å¤ªåˆé€‚ã€‚æ™šé¥­è™½ç„¶åƒçš„æ¸…æ·¡ï¼Œä¸»è¦æ˜¯è”¬èœï¼Œè¡€ç³–æ˜¯å¹³ç¨³ï¼Œä½†å°±æ˜¯è¥å…»ä¸å¤ªå¤Ÿï¼Œå®¹æ˜“å¯¼è‡´è¡€ç³–é™å¾—å¤ªä½ã€‚
ã€é¥®é£Ÿå»ºè®®ã€‘
åˆé¥­ğŸšçš„è¯ï¼Œå»ºè®®ä½ æ¢æˆå…¨éº¦é¢åŒ…æˆ–è€…ç‡•éº¦ï¼Œå†å¤šåƒç‚¹ç»¿å¶èœã€‚è‡³äºæ™šé¥­ğŸŸï¼Œå¾—åŠ ç‚¹è‚‰æˆ–è±†è…è¡¥å……è›‹ç™½è´¨ï¼Œä¸»é£Ÿä¹Ÿä¸èƒ½çœï¼Œæ¥ç‚¹ç³™ç±³é¥­æˆ–å…¨éº¦é¢åŒ…ã€‚è¿™æ ·è¥å…»æ›´å‡è¡¡ï¼Œè¡€ç³–ä¹Ÿä¸ä¼šå¿½é«˜å¿½ä½çš„ã€‚
è®°ä½ğŸŒŸï¼šæ¯é¡¿é¥­éƒ½è¦é€‚é‡ï¼Œåˆ«åƒå¤ªå¤šï¼Œè¿™æ ·è¡€ç³–å¥½æ§åˆ¶ã€‚

Begins!"""


def get_standard_img_type(text):
    if 'è¿åŠ¨' in text:
        return 'sport_image'
    elif 'ä½“é‡' in text:
        return 'weight_image'
    elif 'é¥®é£Ÿ' in text:
        return 'diet_image'
    elif 'å…¶ä»–' in text:
        return 'other_image'
    else:
        return 'other_image'